{
  "id": "dev--languages--python--fluent-in-python--4-control-flow--19-concurrency-models-in-python",
  "path": "dev/languages/python/fluent-in-python/4-control-flow/19-concurrency-models-in-python",
  "title": "19. Concurrency Models in Python",
  "content": "# Processes, Threads and the GIL\n\n1. Each instance of the Python interpreter is a process.\n2. The Python interpreter uses a single thread to run the program and the GC\n3. Access to object reference counts and other internals of the interpreter is managed by the GIL. \n\t1. Only **one** Python thread can hold the GIL at any time. \n\t2. *This means that only one thread can execute Python code at any time, regardless of the number of CPU cores.*\n4. What happens if one thread holds the GIL indefinitely?\n\t1. Python’s bytecode interpreter pauses the current Python thread every 5ms by default and releases the GIL. \n\t2. The thread can then try to reacquire the GIL, but if there are other threads waiting for it, the OS scheduler may pick one of them to proceed.\n5. Python code **CANNOT** touch the GIL. Only functions or extensions that interface at the Python/C API level can release GIL when doing time-consuming tasks.\n\t1. Code written in this manner doesn't have to worry about the GIL of course.\n6. All Python standard library functions release the GIL\n### Impacts of the GIL: Python threads are great at doing nothing!\n\n- **Multi-threaded code isn't good for CPU intensive tasks:** Contention over the GIL slows down compute-intensive Python threads. Sequential, single-threaded code is simpler and faster for such tasks\n\t- Use `multiprocessing` or `concurrent.futures.ProcessPoolExecutor` for this stuff instead.\n- **This doesn't matter that much for network programming:** Most threads spent most of their time waiting on network IO anyway.\n##### The GIL isn't in the Python language spec.\n\n## TODO: How does this change after 3.14 and the removal of the GIL?\n\nSee [PEP 703](https://peps.python.org/pep-0703/) and [**PEP 779**](https://peps.python.org/pep-0779/) for more information.\n\nSee page 736 (766 on PDF) for more high quality links\n#### Some General Definitions\n\n**Concurrency:** The ability to handle multiple pending tasks, making progress one at a time or in parallel (if possible) so that each of them eventually succeeds or fails. \n- A singlecore CPU is capable of concurrency if it runs an OS scheduler that interleaves the execution of the pending tasks. Also known as multitasking. \n\n**Parallelism:** The ability to execute multiple computations at the same time. \n- This requires a multicore CPU, multiple CPUs, a GPU, or multiple computers in a cluster. \n\n**Execution unit:** General term for objects that execute code concurrently, each with independent state and call stack. \n- Python natively supports three kinds of execution units: processes, threads, and coroutines.\n\n**Process:** An instance of a computer program while it is running, using memory and a slice of the CPU time.\n- Processes communicate via pipes, sockets, or memory mapped files—\\ all of which can only carry *raw bytes*. Python objects must be serialized (converted) into raw bytes to pass from one process to another. This is costly, and not all Python objects are serializable\n\n**Threads:** An execution unit within a single process. When a process starts, it uses a single thread: the main thread.\n- Threads within a process share the same memory space, which holds live Python objects.\n- A thread consumes less resources than a process doing the same job\n- **A thread belongs to exactly one process**\n\n**Coroutine:** A function that can suspend itself and resume later. In Python, classic coroutines are built from generator functions, and native coroutines are defined with `async def`.\n\n**Lock:** An object that execution units can use to synchronize their actions and avoid corrupting data. While updating a shared data structure, the running code should hold an associated lock.\n\n**Contention:** Dispute over a limited asset. Resource contention happens when multiple execu‐ tion units try to access a shared resource—such as a lock or storage.\n\n\n\n\n\n\n\n\n",
  "metadata": {
    "date": "2026-01-16",
    "updated": "2026-01-16"
  },
  "images": [],
  "links": []
}